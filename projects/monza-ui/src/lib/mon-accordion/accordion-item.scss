@use "styles" as mon;

:host {
    --mon-accordion-border-size: 0.1rem;
    --mon-accordion-outline-size: 0.2rem;

    display: block;
    margin: 0; padding: 0 var(--mon-space-1);
    background: var(--mon-color-surface);
    border-left: solid var(--mon-accordion-border-size) var(--mon-color-border);
    border-right: solid var(--mon-accordion-border-size) var(--mon-color-border);
    overflow: hidden;
    transition: all var(--mon-duration);

    /* Header button */
    .mon-accordion-item__header {
        display: flex;
        width: 100%; height: 2.5rem;
        padding: 0 var(--mon-space-1, 0.5rem) 0 var(--mon-space-2, 0.75rem);
        background: transparent;
        border: none;
        border-radius: var(--mon-radius-default);
        align-items: center;
        justify-content: space-between;
        gap: var(--mon-space-2, 1rem);
        cursor: pointer;
        text-align: left;
        font: inherit;
        color: var(--mon-color-text);
        outline: none;
        transition:
            background var(--mon-duration) var(--mon-ease),
            color var(--mon-duration) var(--mon-ease),
            transform var(--mon-duration-fast, 120ms) var(--mon-ease);
            
        &:active:not(:disabled) {
            transform: scale(0.99);
        }

        .mon-accordion-item__header-label {
            @include mon.mon-typography('label-sm');
        }

        .mon-accordion-item__header-chevron {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            transition: all var(--mon-duration);
        }
    }

    /* Panel body */
    .mon-accordion-item__panel {
        max-height: 0;
        overflow: hidden;
        transition: all var(--mon-duration);
        opacity: 0;
        transform: translateY(-4px);

        .mon-accordion-item__panel-inner {
            padding: var(--mon-space-2, 0.5rem) var(--mon-space-3, 0.75rem) var(--mon-space-3, 0.75rem);
        }

        &--expanded {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    &:nth-child(1) {
        padding-top: var(--mon-space-1);
        border-top: solid var(--mon-accordion-border-size) var(--mon-color-border);
        border-radius: var(--mon-radius-lg, 1.75rem) var(--mon-radius-lg, 1.75rem) 0 0;
    }
    &:nth-last-child(1) {
        padding-bottom: var(--mon-space-1);
        border-bottom: solid var(--mon-accordion-border-size) var(--mon-color-border);
        border-radius: 0 0 var(--mon-radius-lg, 1.75rem) var(--mon-radius-lg, 1.75rem);
    }
    &:hover{
        .mon-accordion-item__header:not(:disabled) {
            background: color-mix(in srgb, var(--mon-color-primary) 10%, white);
        }
    }


    &.mon-accordion-item--expanded {
        margin: var(--mon-space-1) 0;
        padding: var(--mon-space-1);
        border-radius: var(--mon-radius-lg, 1.75rem);
        border: solid var(--mon-accordion-border-size) var(--mon-color-primary);
        outline: solid var(--mon-accordion-outline-size) color-mix(in srgb, var(--mon-color-primary) 60%, white);

        /* Header button */
        .mon-accordion-item__header {
            height: 2.7rem;
            background: color-mix(in srgb, var(--mon-card-bg, var(--mon-color-primary)) 10%, white);
                
            &:active:not(:disabled) {
                transform: scale(0.99);
            }

            .mon-accordion-item__header-chevron {
                transform: rotate(180deg); 
            }
        }
    }

    &.mon-accordion-item--before-expanded {
        padding-bottom: var(--mon-space-1);
        border-bottom: solid var(--mon-accordion-border-size) var(--mon-color-border);
        border-bottom-left-radius: var(--mon-radius-lg, 1.75rem);
        border-bottom-right-radius: var(--mon-radius-lg, 1.75rem);
    }
    &.mon-accordion-item--after-expanded {
        padding-top: var(--mon-space-1);
        border-top: solid var(--mon-accordion-border-size) var(--mon-color-border);
        border-top-left-radius: var(--mon-radius-lg, 1.75rem);
        border-top-right-radius: var(--mon-radius-lg, 1.75rem);
    }

    &.mon-accordion-item--disabled {
        opacity: 0.5;
        filter: grayscale(1);
        cursor: unset;
    }
}